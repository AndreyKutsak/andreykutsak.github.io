<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <title>ArcGIS API for JavaScript Tutorials: Display a map</title>
    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
    </style>

    <link
      rel="stylesheet"
      href="https://js.arcgis.com/4.23/esri/themes/light/main.css"
    />

    <script src="https://js.arcgis.com/4.23/"></script>

    <script>
      require(["esri/config", "esri/Map", "esri/views/MapView"], function (
        esriConfig,
        Map,
        MapView,
      ) {});
    </script>
  </head>
  <body>
    <div id="viewDiv"></div>
  </body>
  <script>
    let locationData=[28.4222932,49.2338086,];
    var option = {
      enableHighAccuracy: true,
      timeout: 5000,
      maximumAge: 0,
    };
    navigator.geolocation.getCurrentPosition(success, err, option);
    function success(coords) {
     
     
      console.log(coords,locationData)
    }
    function err(err) {
      alert("Невдалося встановити Ваше точне місце знаходження");
    }
    require([
      "esri/config",
      "esri/Map",
      "esri/views/MapView",
      "esri/Graphic",
      "esri/layers/GraphicsLayer",

      "esri/widgets/Locate",

      "esri/widgets/Track",
      "esri/Graphic",
    ], function (
      esriConfig,
      Map,
      MapView,
      Graphic,
      GraphicsLayer,
      Locate,
      Track,
      Graphic,
    ) {
      esriConfig.apiKey =
        "AAPK0e4ab673210f4d169f8b8ddf5c53c8a0kEvE11pfYVgvuLAyGEnAw8_MgPloqm-gZmOD8zio8LUpVEIKJUZojHJsN94vEOCv";
      console.log(locationData);
      const map = new Map({
        basemap: "arcgis-imagery", //Basemap layer service
      });

      const view = new MapView({
        zoom: 8,
        container: "viewDiv",
        map: map,
        center: locationData,
      });
      const locate = new Locate({
        view: view,
        useHeadingEnabled: false,
        goToOverride: function (view, options) {
          console.log(options, view);
          options.target.scale = 1500;
          return view.goTo(options.target);
        },
      });
      const track = new Track({
        view: view,
        graphic: new Graphic({
          symbol: {
            type: "simple-marker",
            size: "15px",
            color: "green",
            outline: {
              color: "#efefef",
              width: "1.5px",
            },
          },
        }),
        useHeadingEnabled: false,
      });
      view.ui.add(track, "top-right");
      view.ui.add(locate, "bottom-left");
    });
  </script>
</html>
